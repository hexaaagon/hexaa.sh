{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "trailing-scroll",
  "type": "registry:component",
  "description": "element go slower or faster based on scroll and more cooler",
  "dependencies": [
    "gsap"
  ],
  "files": [
    {
      "path": "labs-registry/components-v1/trailing-scroll.tsx",
      "content": "\"use client\";\r\n\r\nimport { gsap } from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\nimport { useEffect } from \"react\";\r\n\r\nif (typeof window !== \"undefined\") {\r\n  gsap.registerPlugin(ScrollTrigger);\r\n}\r\n\r\nexport interface TrailingEffectProps {\r\n  elements: (ParallaxImage | ParallaxElement)[];\r\n  className?: string;\r\n  containerClassName?: string;\r\n  speedMultiplier?: number;\r\n  startY?: number;\r\n  fadeStart?: string;\r\n  fadeEnd?: string;\r\n  scrub?: boolean | number;\r\n}\r\n\r\nexport interface ParallaxImage {\r\n  id: string;\r\n  src: string;\r\n  alt: string;\r\n  speed: number;\r\n  className: string;\r\n  width?: number;\r\n}\r\n\r\nexport interface ParallaxElement {\r\n  id: string;\r\n  component: React.ReactNode;\r\n  speed: number;\r\n  className: string;\r\n}\r\n\r\nexport default function TrailingScroll({\r\n  elements,\r\n  className = \"\",\r\n  containerClassName = \"\",\r\n  speedMultiplier = 100,\r\n  startY = 100,\r\n  fadeStart = \"top bottom\",\r\n  fadeEnd = \"bottom top\",\r\n  scrub = true,\r\n}: TrailingEffectProps) {\r\n  useEffect(() => {\r\n    const section = document.querySelector(\"[data-trailing-section]\");\r\n    if (!section) return;\r\n\r\n    const triggers: ScrollTrigger[] = [];\r\n\r\n    // Parallax animation function\r\n    function parallaxScrollBySpeed(selector: string, speed = 1) {\r\n      const el = document.querySelector(selector);\r\n      if (!el) return;\r\n\r\n      const animation = gsap.fromTo(\r\n        el,\r\n        { y: startY, opacity: 1 },\r\n        {\r\n          y: (speed - 1) * -speedMultiplier,\r\n          opacity: 1,\r\n          ease: \"none\",\r\n          scrollTrigger: {\r\n            trigger: section,\r\n            start: fadeStart,\r\n            end: fadeEnd,\r\n            scrub: scrub,\r\n          },\r\n        },\r\n      );\r\n\r\n      const trigger = animation.scrollTrigger;\r\n      if (trigger) {\r\n        triggers.push(trigger);\r\n      }\r\n    }\r\n\r\n    // Apply parallax to each element with a slight delay to ensure DOM is ready\r\n    const timeoutId = setTimeout(() => {\r\n      elements.forEach((element) => {\r\n        parallaxScrollBySpeed(`[data-parallax=\"${element.id}\"]`, element.speed);\r\n      });\r\n\r\n      // Refresh ScrollTrigger to recalculate positions after all animations are set\r\n      ScrollTrigger.refresh();\r\n    }, 100);\r\n\r\n    // Cleanup function\r\n    return () => {\r\n      clearTimeout(timeoutId);\r\n      triggers.forEach((trigger) => {\r\n        trigger.kill();\r\n      });\r\n    };\r\n  }, [elements, speedMultiplier, startY, fadeStart, fadeEnd, scrub]);\r\n\r\n  return (\r\n    <div\r\n      data-trailing-section\r\n      className={`pointer-events-none absolute bottom-0 w-full ${containerClassName}`}\r\n    >\r\n      <div className={`absolute inset-0 ${className}`}>\r\n        {elements.map((element) => {\r\n          if (isParallaxImage(element)) {\r\n            return (\r\n              <img\r\n                key={element.id}\r\n                data-parallax={element.id}\r\n                src={element.src}\r\n                alt={element.alt}\r\n                width={element.width}\r\n                className={element.className}\r\n              />\r\n            );\r\n          }\r\n\r\n          return (\r\n            <div\r\n              key={element.id}\r\n              data-parallax={element.id}\r\n              className={element.className}\r\n            >\r\n              {element.component}\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction isParallaxImage(\r\n  element: ParallaxImage | ParallaxElement,\r\n): element is ParallaxImage {\r\n  return \"src\" in element;\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}