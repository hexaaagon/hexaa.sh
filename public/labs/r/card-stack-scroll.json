{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "card-stack-scroll",
  "type": "registry:component",
  "description": "basically a card but it",
  "dependencies": [
    "gsap"
  ],
  "files": [
    {
      "path": "labs-registry/components-v1/card-stack-scroll.tsx",
      "content": "\"use client\";\r\nimport type React from \"react\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { gsap } from \"gsap\";\r\nimport { ScrollTrigger } from \"gsap/ScrollTrigger\";\r\n\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardDescription,\r\n  CardContent,\r\n} from \"@/components/ui/card\";\r\nimport { cn } from \"@/lib/utils\";\r\n\r\nif (typeof window !== \"undefined\") {\r\n  gsap.registerPlugin(ScrollTrigger);\r\n}\r\n\r\nexport type CardStackPropsBase = {\r\n  cardData: Array<Omit<CardProps, \"index\" | \"totalCards\">>;\r\n};\r\n\r\nexport type CardStackProps = React.ComponentPropsWithoutRef<\"section\"> &\r\n  CardStackPropsBase;\r\n\r\nexport interface CardProps {\r\n  id: number;\r\n  title: string;\r\n  description: string;\r\n  index: number;\r\n  totalCards: number;\r\n  color: string;\r\n  star?: React.ComponentType<\r\n    React.SVGProps<SVGSVGElement> & {\r\n      size?: number;\r\n      color?: string;\r\n      stroke?: string;\r\n      strokeWidth?: number;\r\n      pathClassName?: string;\r\n    }\r\n  >;\r\n}\r\n\r\nconst StackCard: React.FC<CardProps> = ({\r\n  star: Star,\r\n  title,\r\n  description,\r\n  index,\r\n  totalCards,\r\n  color,\r\n}) => {\r\n  const cardRef = useRef<HTMLDivElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const card = cardRef.current;\r\n    const container = containerRef.current;\r\n    if (!card || !container) return;\r\n\r\n    const targetScale = 1 - (totalCards - index) * 0.05;\r\n\r\n    // Set initial state\r\n    gsap.set(card, {\r\n      scale: 1,\r\n      transformOrigin: \"center top\",\r\n    });\r\n\r\n    // Create scroll trigger for stacking effect\r\n    ScrollTrigger.create({\r\n      trigger: container,\r\n      start: \"top center\",\r\n      end: \"bottom top\",\r\n      scrub: 1,\r\n      onUpdate: (self) => {\r\n        const progress = self.progress;\r\n        const scale = gsap.utils.interpolate(1, targetScale, progress);\r\n\r\n        gsap.set(card, {\r\n          scale: Math.max(scale, targetScale),\r\n          transformOrigin: \"center top\",\r\n        });\r\n      },\r\n    });\r\n\r\n    return () => {\r\n      for (const trigger of ScrollTrigger.getAll()) {\r\n        trigger.kill();\r\n      }\r\n    };\r\n  }, [index, totalCards]);\r\n\r\n  return (\r\n    <div\r\n      ref={containerRef}\r\n      className=\"sticky top-0 flex min-h-[75vh] flex-col items-center justify-center\"\r\n    >\r\n      <div\r\n        ref={cardRef}\r\n        className=\"relative w-full max-w-[800px] origin-top px-2 md:px-4\"\r\n        style={{\r\n          top: `calc(-5vh + ${index * 25}px)`,\r\n        }}\r\n      >\r\n        <Card\r\n          className=\"relative flex min-h-[300px] flex-col justify-start gap-2 border-[3px] px-2 pt-8 md:min-h-[400px] md:gap-6 md:px-5 md:pt-12\"\r\n          style={{\r\n            borderColor: color,\r\n          }}\r\n        >\r\n          <CardHeader>\r\n            {Star && (\r\n              <span className=\"h-min w-min\">\r\n                <Star\r\n                  size={48}\r\n                  className=\"mb-1 stroke-6 stroke-foreground text-main\"\r\n                />\r\n              </span>\r\n            )}\r\n            <CardTitle className=\"text-2xl sm:text-3xl md:text-4xl\">\r\n              {title}\r\n            </CardTitle>\r\n          </CardHeader>\r\n          <CardContent>\r\n            <CardDescription className=\"text-sm sm:text-lg md:text-xl\">\r\n              {description}\r\n            </CardDescription>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport function StackedCards({\r\n  cardData,\r\n  className,\r\n  ...props\r\n}: CardStackProps) {\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    gsap.fromTo(\r\n      container,\r\n      { opacity: 0 },\r\n      {\r\n        opacity: 1,\r\n        duration: 1.2,\r\n        ease: \"power2.out\",\r\n      },\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <section ref={containerRef} className={cn(\"w-full\")} {...props}>\r\n      {cardData.map((card, index) => (\r\n        <StackCard\r\n          key={card.id}\r\n          id={card.id}\r\n          star={card.star}\r\n          title={card.title}\r\n          description={card.description}\r\n          index={index}\r\n          totalCards={cardData.length}\r\n          color={card.color}\r\n        />\r\n      ))}\r\n    </section>\r\n  );\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}